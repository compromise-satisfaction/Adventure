/**
 * ex.enchant.js
 * @version 0.1 (2012/6/7)
 * @requires enchant.js v0.4.3 or later
 * @author <a href="http://www20.atpages.jp/katwat/wp/">katwat</a>
 */
/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this file,
 * You can obtain one at http://mozilla.org/MPL/2.0/. 
 */
(function(){var c=function(v){return parseFloat(v)||0};enchant.Group.prototype.removeAllChildren=function(){while(this.childNodes.length>0){this.removeChild(this.childNodes[0])}};enchant.Entity.prototype.addClass=function(a){var b=this.className.split(/\s+/);if(b.some(function(v){return v===a})){return}b.push(a);this.className=b.join(' ')};enchant.Entity.prototype.removeClass=function(a){var b=this.className.split(/\s+/);b=b.filter(function(v){return v!==a});this.className=b.join(' ')};enchant.Entity.prototype.render=function(){this.dispatchEvent(new enchant.Event('render'))};enchant.Entity.prototype.getBoxDimensions=function(a){var e=this._element.cloneNode(true),s,m;if(!a){a=document.body}else if(a instanceof enchant.Entity){a=a._element}a.appendChild(e);s=getComputedStyle(e,'');m={};m.marginTop=c(s.marginTop);m.marginLeft=c(s.marginLeft);m.marginBottom=c(s.marginBottom);m.marginRight=c(s.marginRight);m.borderTopWidth=c(s.borderTopWidth);m.borderLeftWidth=c(s.borderLeftWidth);m.borderBottomWidth=c(s.borderBottomWidth);m.borderRightWidth=c(s.borderRightWidth);m.paddingTop=c(s.paddingTop);m.paddingLeft=c(s.paddingLeft);m.paddingBottom=c(s.paddingBottom);m.paddingRight=c(s.paddingRight);m.contentWidth=e.offsetWidth-m.borderLeftWidth-m.paddingLeft-m.paddingRight-m.borderRightWidth;m.contentHeight=e.offsetHeight-m.borderTopWidth-m.paddingTop-m.paddingBottom-m.borderBottomWidth;a.removeChild(e);return m};enchant.Entity.prototype.getBoxWidth=function(a){var e=this._element.cloneNode(true),s,w;if(!a){a=document.body}else if(a instanceof enchant.Entity){a=a._element}a.appendChild(e);s=getComputedStyle(e,'');w=e.offsetWidth+c(s.marginLeft)+c(s.marginRight);a.removeChild(e);return w};enchant.Entity.prototype.setBoxWidth=function(w,a){var e=this._element.cloneNode(true),s;if(!a){a=document.body}else if(a instanceof enchant.Entity){a=a._element}a.appendChild(e);s=getComputedStyle(e,'');this.width=w-c(s.marginLeft)-c(s.borderLeftWidth)-c(s.paddingLeft)-c(s.paddingRight)-c(s.borderRightWidth)-c(s.marginRight);a.removeChild(e)};enchant.Entity.prototype.getBoxHeight=function(a){var e=this._element.cloneNode(true),s,h;if(!a){a=document.body}else if(a instanceof enchant.Entity){a=a._element}a.appendChild(e);s=getComputedStyle(e,'');h=e.offsetHeight+c(s.marginTop)+c(s.marginBottom);a.removeChild(e);return h};enchant.Entity.prototype.setBoxHeight=function(h,a){var e=this._element.cloneNode(true),s;if(!a){a=document.body}else if(a instanceof enchant.Entity){a=a._element}a.appendChild(e);s=getComputedStyle(e,'');this.height=h-c(s.marginTop)-c(s.borderTopWidth)-c(s.paddingTop)-c(s.paddingBottom)-c(s.borderBottomWidth)-c(s.marginBottom);a.removeChild(e)};enchant.Entity.prototype.autoSize=function(a){var e,s;this._style.width='auto';this._style.height='auto';e=this._element.cloneNode(true);if(!a){a=document.body}else if(a instanceof enchant.Entity){a=a._element}a.appendChild(e);s=getComputedStyle(e,'');this.width=e.offsetWidth-c(s.borderLeftWidth)-c(s.paddingLeft)-c(s.paddingRight)-c(s.borderRightWidth);this.height=e.offsetHeight-c(s.borderTopWidth)-c(s.paddingTop)-c(s.paddingBottom)-c(s.borderBottomWidth);a.removeChild(e)};Object.defineProperties(enchant.Entity.prototype,{z:{get:function(){return parseFloat(this._style.zIndex)||this._style.zIndex},set:function(z){this._style.zIndex=z},enumerable:true},boxWidth:{get:function(){return this.getBoxWidth()},set:function(w){this.setBoxWidth(w)}},boxHeight:{get:function(){return this.getBoxHeight()},set:function(h){this.setBoxHeight(h)}}});enchant.Surface.prototype.toBackgroundImage=function(){return this._css||('url('+this.toDataURL()+')')}}());